(function(){tinymce.PluginManager.add("textindent",function(B,A){B.on("init",function(){B.formatter.register({textindent:{block:"p",styles:{"text-indent":"%value"}},})});B.ui.registry.addButton("text-indent",{tooltip:"首行缩进",icon:"indent",onAction:function(){var E=B.selection.getNode();var D=B.dom.getAttrib(E,"style").toLowerCase().replace(/\s/g,"");var F=/text-indent:[^0]{1}\d*\w*;/;if(D&&(F).test(D)){var C=D.replace(F,"");console.log(C);if(!C){B.dom.setAttrib(E,"style","")}else{B.dom.setAttrib(E,"style",C)}}else{tinymce.activeEditor.formatter.apply("textindent",{value:"2em"})}B.focus()}})})})();